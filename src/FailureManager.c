#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#define I_AM_ALIVE SIGUSR2

///////////////////////////////////////////////////////////////////
////////// Metodo per la ricezione di SIGUSR1 ////////////////////
/////////////////////////////////////////////////////////////////
void killAll(int sig) {
  printf("\nSIGUSR1 ricevuto, uccisione dei processi in corso...\n");
  remove("PipeP1");
  remove("SocketP2");
  remove("FileCondivisoP3.txt");
  remove("DFsocket");
  kill(0, SIGKILL);
}

///////////////////////////////////////////////////////////////////
////////////////////////// Main //////////////////////////////////
/////////////////////////////////////////////////////////////////
int main(int argc,char* argv){
  signal(SIGUSR1,killAll);
  signal(SIGINT, killAll);

  signal(I_AM_ALIVE, SIG_IGN);
  pause();
}
